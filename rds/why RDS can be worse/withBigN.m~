
% we skip 10


realValue = mean(field);
numberOfSamples = 1000;

responses = zeros(numberOfWalks, numberOfSamples);
degrees = zeros(numberOfWalks, numberOfSamples);

P = transMatrRW(graph);
initialDistr = degreeDistribution(graph);
for i = 1:numberOfWalks   
    [~,  responses(i, :), degrees(i, :)] = takeSamples(initialDistr, P, numberOfSamples, graph, @propertyForSample, field);
    progress(i, 10);
end


meanExper = zeros(numberOfWalks, maxToSkip);
meanExper2 = zeros(numberOfWalks, maxToSkip);

counter = 1;
k = 10;

for n = k*10: 25 :numberOfSamples 

    for i = 1:numberOfWalks

        curResponses =  responses(i, 1:(k+1):n);
        curDegrees   =  degrees  (i, 1:(k+1):n);
        curNodes     =  nodes    (i, 1:(k+1):n);
        
        meanExper(i, counter) = mean(curResponses);
        meanExper2(i, counter) = estimateRDS(curDegrees, curResponses);

    end
    counter = counter + 1;  
    
end


%realValue = mean(graphDegrees(graph));
% varExper = var(meanExper);
% varExper2 = var(meanExper2);
varExper = MSE(meanExper, realValue);
varExper2 = MSE(meanExper2, realValue);

% min function
k = 0:(maxToSkip-1);
[~, index] = min(varExper);
minK = k(index(1));